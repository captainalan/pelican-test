<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>Practical Shell Scripting, Part 3</title>
        <link rel="stylesheet" href="https://captainalan.github.io/pelican-test/theme/css/main.css" />
        <link href="https://captainalan.github.io/pelican-test/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Alan's Miscellaneous Stuff Blog Atom Feed" />
        <meta name="description" content="In this post, we will introduce xargs, which allows you to pass in arguments to a command via standard input. For example, to do echo "$HOME" |..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://captainalan.github.io/pelican-test/">Alan's Miscellaneous Stuff Blog</a></h1>
                <nav><ul>
                    <li><a href="https://captainalan.github.io/pelican-test/category/fun.html">Fun</a></li>
                    <li><a href="https://captainalan.github.io/pelican-test/category/interwebs.html">Interwebs</a></li>
                    <li><a href="https://captainalan.github.io/pelican-test/category/lifestyle.html">Lifestyle</a></li>
                    <li class="active"><a href="https://captainalan.github.io/pelican-test/category/linux.html">Linux</a></li>
                    <li><a href="https://captainalan.github.io/pelican-test/category/news.html">News</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://captainalan.github.io/pelican-test/practical-shell-scripting-part-3.html" rel="bookmark"
           title="Permalink to Practical Shell Scripting, Part 3">Practical Shell Scripting, Part 3</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-21T00:00:00-07:00">
                Published: Thu 21 May 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://captainalan.github.io/pelican-test/author/alan-wong.html">Alan Wong</a>
        </address>
<p>In <a href="https://captainalan.github.io/pelican-test/category/linux.html">Linux</a>.</p>

</footer><!-- /.post-info -->      <p>In this post, we will introduce <code>xargs</code>, which allows you to pass in
arguments to a command via standard input.</p>
<p>For example, to do</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">&quot;</span> <span class="p">|</span> xargs ls -la
</code></pre></div>

<p>is like doing</p>
<div class="highlight"><pre><span></span><code>ls <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">&quot;</span> -la
</code></pre></div>

<p>We can think of <code>xargs</code> as a kind of "keyword" or "syntactic feature"
of shell scripting since it gives us a general mechanism for combining
the inputs and outputs of various commands.</p>
<h2>Use with <code>find</code></h2>
<p>The <code>-exec</code> option of <code>find</code> can be cumbersome to work with as your
commands get more complex. In this example, <code>find</code> is used to get text
files in the current directory, and then these files are passed to
<code>cat</code> (and then printed to standard output) using <code>xargs</code>.</p>
<div class="highlight"><pre><span></span><code>find . -maxdepth <span class="m">1</span> -type f -name <span class="s2">&quot;*.txt&quot;</span> <span class="p">|</span> xargs cat
</code></pre></div>

<p>Using various options of <code>find</code> we can pass different stuff to
<code>xargs</code>. Below, we find directories with names beginning with "Foo"
and use the <code>tree</code> command to print textual tree representations of
these. This might be useful for copy/pasting a directory
representation to quickly show a collaborator how some project is laid
out.</p>
<div class="highlight"><pre><span></span><code>find . -maxdepth <span class="m">1</span> -type d -name <span class="s2">&quot;Foo*&quot;</span> <span class="p">|</span> xargs tree 
</code></pre></div>

<p>Using <code>find</code> together with <code>xargs</code> can be a useful pattern when you
have to repeat some action against on some files/directories that can
be found using parameters <code>find</code>.</p>
<h2>Storing Arguments in Text Files</h2>
<p>Using <code>xargs</code> we can run commands based on data stored in text
files. This can be very convenient for separating data from the logic
of some script.</p>
<p>Let's suppose you have some directory <code>media_to_consoom_later/</code>. Here,
you queue up YouTube links like,</p>
<div class="highlight"><pre><span></span><code>youtube.com/video1
youtube.com/video2
youtube.com/video3
</code></pre></div>

<p>...in a file called <code>youtube-videos.txt</code>. You have another video
called <code>youtube-music.txt</code> that follows the same format:</p>
<div class="highlight"><pre><span></span><code>youtube.com/track1
youtube.com/track2
youtube.com/track3
</code></pre></div>

<p>Using <code>xargs</code> you can quickly execute two commands to download all the
videos with one set of options and then all the music files with
another. Here is an example usage with the program <code>youtube-dl</code>, used
for downloading media off YouTube:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># No special options needed for video</span>
cat youtube-videos-day1.txt youtube-videos-day2.txt <span class="p">|</span> xargs youtube-dl

<span class="c1"># Use -x for &#39;extract audio&#39;</span>
cat youtube-music.txt <span class="p">|</span> xargs youtube-dl -x
</code></pre></div>

<p>Storing lines like the ones above in a shell script file, you don't
have to remember all the flags/ettings for <code>youtube-dl</code>, and you can
just drop in text links in an intuitive way into the appropriate text
files.</p>
<p>This example too could be done with <code>find</code>, matching <code>-name</code> or some
other option as in,</p>
<div class="highlight"><pre><span></span><code><span class="c1"># No special options needed for video</span>
find . -name <span class="s2">&quot;youtube-videos*&quot;</span> -type f <span class="p">|</span> xargs youtube-dl
</code></pre></div>

<p>What is cool here is that you can separate the more complicated part
of what you're doing (e.g. setting up some options with <code>find</code>;
reading some stuff from a file that may be created through a
complicated procedure) from a relatively simple command you want to
run (e.g. <code>youtube-dl</code>). Editing the <code>...| xargs &lt;COMMAND&gt;</code> is not so
bad even if the stuff that comes before it is difficult to figure out
the first time.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="https://captainalan.github.io/">Homepage</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://captainalan.github.io/pelican-test/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/captainalan">GitHub</a></li>
                            <li><a href="https://www.linkedin.com/in/alan-wong-bb342569/">Linked In</a></li>
                            <li><a href="https://www.facebook.com/captainalan">Facebook</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>